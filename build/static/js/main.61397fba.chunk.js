(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},38:function(e,n,t){"use strict";t.r(n);var a=t(14),r=t(2),u=t(0),o=t.n(u),l=t(13),i=t.n(l),c=t(3),m=t.n(c),f="/api/persons",d=function(){return m.a.get(f).then(function(e){return e.data})},s=function(e){return m.a.post(f,e).then(function(e){return e.data})},b=function(e){return m.a.delete(f+"/"+e).then(function(e){return e})},h=function(e,n,t){return m.a.put(f+"/"+n,t).then(function(e){return e.data})},v=function(e){var n=e.persons,t=e.filter,a=e.handleDelete;return n.map(function(e){if(e.name.includes(t))return o.a.createElement("p",{key:e.id},e.name+" "+e.number," ",o.a.createElement("button",{id:e.id,value:e.name,onClick:a},"Delete"))})},p=function(e){var n=e.handle,t=e.value;return o.a.createElement("form",null,o.a.createElement("div",null,"filter shown with",o.a.createElement("input",{onChange:n,value:t})))},E=function(e){var n=e.onsubmit,t=e.onNameChange,a=e.onNumberChange,r=e.namevalue,u=e.numbervalue;return o.a.createElement("form",{onSubmit:n},o.a.createElement("div",null,"name: ",o.a.createElement("input",{onChange:t,value:r})),o.a.createElement("div",null,"number: ",o.a.createElement("input",{onChange:a,value:u})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add")))},g=function(e){var n=e.name,t=e.error;if(null===n)return null;var a={color:t?"red":"green",background:"lightgrey",fontSize:20,borderStyle:"solid",borderRadius:5,padding:10,marginBottom:10};return o.a.createElement("div",{style:a},t?o.a.createElement("p",null,"Information of ",n," has already been removed from server"):o.a.createElement("p",null,n," was added to the phonebook"))};i.a.render(o.a.createElement(function(){var e=Object(u.useState)([]),n=Object(r.a)(e,2),t=n[0],l=n[1],i=Object(u.useState)(""),c=Object(r.a)(i,2),m=c[0],f=c[1],w=Object(u.useState)(""),j=Object(r.a)(w,2),O=j[0],y=j[1],S=Object(u.useState)(""),k=Object(r.a)(S,2),C=k[0],N=k[1],D=Object(u.useState)(null),B=Object(r.a)(D,2),I=B[0],J=B[1],T=Object(u.useState)(!1),x=Object(r.a)(T,2),z=x[0],A=x[1];Object(u.useEffect)(function(){console.log("effect is in use"),d().then(function(e){return l(e)})},[]);return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(p,{handle:function(e){N(e.target.value)},value:C}),o.a.createElement("h2",null,"Add a new"),o.a.createElement(g,{name:I,error:z}),o.a.createElement(E,{onsubmit:function(e){if(e.preventDefault(),0===O.length||0===m.length)return alert("Both inputs have to be filled in"),y(""),void f("");if(t.some(function(e){return e.number===O}))y("");else if(t.some(function(e){return e.name===m})){if(window.confirm(m+"is already added to phonebook, replace the old number with a new one?")){var n=t.find(function(e){if(e.name===m)return e}),r=Object(a.a)({},n,{number:O});return h(O,n.id,r).then(function(e){return l(t.map(function(t){return t.id!==n.id?t:e}))}),f(""),void y("")}y("")}else s({name:m,number:O}).then(function(e){l(t.concat(e)),J(m),setTimeout(function(){J(null)},5e3),f(""),y("")})},onNameChange:function(e){f(e.target.value)},onNumberChange:function(e){y(e.target.value)},namevalue:m,numbervalue:O}),o.a.createElement("h2",null,"Numbers"),o.a.createElement(v,{persons:t,filter:C,handleDelete:function(e){var n=e.target.id,a=e.target.value;window.confirm("are you sure you want to delete "+e.target.value)&&b(n).then(function(e){l(t.filter(function(e){return Number(n)!==e.id}))}).catch(function(e){J(a),A(!0),setTimeout(function(){J(null),A(!1)},5e3),l(t.filter(function(e){return Number(n)!==e.id}))})}}))},null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.61397fba.chunk.js.map