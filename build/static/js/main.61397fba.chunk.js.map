{"version":3,"sources":["services/Persons.js","index.js"],"names":["url","Persons","axios","get","then","response","data","personobj","post","id","delete","number","personobject","put","RenderPersons","_ref","persons","filter","handleDelete","map","person","name","includes","react_default","a","createElement","key","value","onClick","SearchFilter","_ref2","handle","onChange","AddPeople","_ref3","onsubmit","onNameChange","onNumberChange","namevalue","numbervalue","onSubmit","type","Notification","_ref4","error","notificationStyle","color","background","fontSize","borderStyle","borderRadius","padding","marginBottom","style","ReactDOM","render","_useState","useState","_useState2","Object","slicedToArray","setPersons","_useState3","_useState4","newName","setNewName","_useState5","_useState6","newNumber","setNewNumber","_useState7","_useState8","setFilter","_useState9","_useState10","notificationName","setNotificationName","_useState11","_useState12","errorState","setErrorState","useEffect","console","log","src_SearchFilter","event","target","src_Notification","src_AddPeople","preventDefault","length","alert","some","e","window","confirm","getperson","find","newnumber","objectSpread","concat","setTimeout","src_RenderPersons","personid","personname","Number","catch","document","getElementById"],"mappings":"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","file":"static/js/main.61397fba.chunk.js","sourcesContent":["import axios from 'axios'\r\nconst url = '/api/persons';\r\n\r\nconst getAllPersons = () =>{\r\n  const makerequest = axios.get(url);\r\n  return makerequest.then(response => response.data)\r\n};\r\n\r\nconst addPerson = (personobj) =>{\r\n  const makerequest = axios.post(url, personobj);\r\n  return makerequest.then(response => response.data)\r\n};\r\n\r\nconst removePerson = (id) =>{\r\n  const makerequest = axios.delete(url + \"/\" + id);\r\n  return makerequest.then(response => response)\r\n};\r\n\r\nconst updatePersonNumber = (number, id, personobject) =>{\r\n  const makerequest = axios.put(url + \"/\" + id, personobject);\r\n  return makerequest.then(response => response.data)\r\n};\r\n\r\nexport default {getAllPersons, addPerson, removePerson, updatePersonNumber}","import React, { useState, useEffect } from 'react'\r\nimport ReactDOM from \"react-dom\";\r\nimport Persons from './services/Persons'\r\n\r\n\r\nconst RenderPersons = ({persons, filter, handleDelete}) =>{\r\n\r\n  return(persons.map(person => {\r\n    if(person.name.includes(filter)){\r\n\r\n      return(<p key={person.id}>{person.name + \" \" + person.number} <button id={person.id} value={person.name} onClick={handleDelete}>Delete</button></p>)\r\n    }\r\n  }));\r\n};\r\n\r\nconst SearchFilter = ({handle, value}) =>{\r\n  return(\r\n    <form>\r\n      <div>\r\n        filter shown with<input onChange={handle} value={value}/>\r\n      </div>\r\n    </form>);\r\n};\r\n\r\nconst AddPeople = ({onsubmit, onNameChange, onNumberChange, namevalue, numbervalue}) =>{\r\n  return(\r\n    <form onSubmit={onsubmit}>\r\n      <div>\r\n        name: <input onChange={onNameChange} value={namevalue}/>\r\n      </div>\r\n      <div>number: <input onChange={onNumberChange} value={numbervalue}/></div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>);\r\n};\r\n\r\nconst Notification = ({name, error}) =>{\r\n  if(name === null){\r\n    return null\r\n  }\r\n\r\n  const color = error ? \"red\" : \"green\";\r\n\r\n  const notificationStyle = {\r\n    color: color,\r\n    background: \"lightgrey\",\r\n    fontSize: 20,\r\n    borderStyle: \"solid\",\r\n    borderRadius: 5,\r\n    padding: 10,\r\n    marginBottom: 10\r\n  };\r\n\r\n  const notificationtext = () =>{\r\n    if(error){\r\n      return <p>Information of {name} has already been removed from server</p>\r\n    }else{\r\n      return <p>{name} was added to the phonebook</p>\r\n    }\r\n  };\r\n\r\n  return(\r\n    <div style={notificationStyle}>\r\n      {notificationtext()}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName ] = useState('');\r\n  const [newNumber,setNewNumber] = useState('');\r\n  const [filter,setFilter] = useState('');\r\n  const [notificationName, setNotificationName] = useState(null);\r\n  const [errorState, setErrorState] = useState(false);\r\n\r\n  useEffect(() =>{\r\n    console.log(\"effect is in use\");\r\n    Persons\r\n      .getAllPersons()\r\n      .then(response => setPersons(response))\r\n  },[]);\r\n\r\n  const addPerson = (event) =>{\r\n    event.preventDefault();\r\n    if(newNumber.length === 0 || newName.length === 0){\r\n      alert(\"Both inputs have to be filled in\");\r\n      setNewNumber('');\r\n      setNewName('');\r\n      return\r\n    }\r\n\r\n    if(persons.some(e => e.number === newNumber)){\r\n      setNewNumber('');\r\n      return\r\n    }\r\n\r\n    if(persons.some(e => e.name === newName)) {\r\n      if (window.confirm(newName + \"is already added to phonebook, replace the old number with a new one?\")) {\r\n        const getperson = persons.find(person => {\r\n          if (person.name === newName) return person\r\n        });\r\n\r\n        const newnumber = {...getperson, number: newNumber};\r\n\r\n        Persons\r\n          .updatePersonNumber(newNumber, getperson.id, newnumber)\r\n          .then(response => setPersons(persons.map(person => person.id !== getperson.id ? person : response)));\r\n        setNewName('');\r\n        setNewNumber('');\r\n        return\r\n      }else{\r\n        setNewNumber('');\r\n        return\r\n      }\r\n    }\r\n\r\n    const personobj = {name: newName, number: newNumber};\r\n    Persons\r\n      .addPerson(personobj)\r\n      .then(response =>{\r\n        setPersons(persons.concat(response));\r\n        setNotificationName(newName);\r\n        setTimeout(() =>{\r\n          setNotificationName(null);\r\n        }, 5000);\r\n        setNewName('');\r\n        setNewNumber('');\r\n      })\r\n  };\r\n\r\n  const handlePersonChange = (event) =>{\r\n    setNewName(event.target.value)\r\n  };\r\n\r\n  const handleNumberChange = (event) =>{\r\n    setNewNumber(event.target.value)\r\n  };\r\n\r\n  const handleFilterChange = (event) =>{\r\n    setFilter(event.target.value)\r\n  };\r\n\r\n  const handleDelete = (event) =>{\r\n    const personid = event.target.id;\r\n    const personname = event.target.value;\r\n\r\n    if(window.confirm(\"are you sure you want to delete \" + event.target.value )) {\r\n      Persons\r\n        .removePerson(personid)\r\n        .then(response => {\r\n          setPersons(persons.filter(person => Number(personid) !== person.id))\r\n        }).catch(error =>{\r\n        setNotificationName(personname);\r\n        setErrorState(true);\r\n        setTimeout(() =>{\r\n          setNotificationName(null);\r\n          setErrorState(false)\r\n        }, 5000);\r\n        setPersons(persons.filter(person => Number(personid) !== person.id))})\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <SearchFilter handle={handleFilterChange} value={filter}/>\r\n      <h2>Add a new</h2>\r\n      <Notification name={notificationName} error={errorState}/>\r\n      <AddPeople onsubmit={addPerson} onNameChange={handlePersonChange} onNumberChange={handleNumberChange} namevalue={newName} numbervalue={newNumber}/>\r\n      <h2>Numbers</h2>\r\n      <RenderPersons persons={persons} filter={filter} handleDelete={handleDelete}/>\r\n    </div>\r\n  )\r\n};\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}